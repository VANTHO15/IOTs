<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Thiết Kế Giao Diện</title>
    <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
    <link href="dist/grapesjs-preset-webpage.min.css" rel="stylesheet">
    <script src="//feather.aviary.com/imaging/v3/editor.js"></script>
    <script src="https://static.filestackapi.com/v3/filestack-0.1.10.js"></script>
    <script src="https://unpkg.com/grapesjs"></script>
    <script src="dist/grapesjs-preset-webpage.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- General CSS Files -->
    <link rel="stylesheet" href="assets/css/app.min.css">
    <!-- Template CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <!-- Custom style CSS -->
    <link rel="stylesheet" href="assets/css/custom.css">
    <link rel='shortcut icon' type='image/x-icon' href='assets/img/favicon.ico' />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css">
    <script src=""></script>
    <lord-icon src="https://cdn.lordicon.com/ytgufzvb.json" trigger="hover" colors="primary:#121331,secondary:#08a88a" style="width:250px;height:250px">
    </lord-icon>
    <style>
        body,
      html {
        height: 100%;
        margin: 0;
      }
    </style>
</head>

<body>
    <div id="gjs" style="display: block;"></div>
    <script type="text/javascript">
    const hrefNextTrait = editor => {
        // Custom component
        editor.DomComponents.addType('button-thuc', {
            isComponent: el => el.tagName === 'BUTTON',
            model: {
                defaults: {
                    traits: [{ type: 'input', name: 'label', label: 'Tên' },
                        { type: 'input', name: 'tag_sub', label: 'ID Tag Theo Dõi ' },
                        { type: 'input', name: 'tag_atk', label: 'ID Tag Tác Động ' }
                    ]
                },
                init() {
                    this.on('change:attributes:label', this.handleChange);
                    this.on('change:attributes:tag_sub', this.handleChange);
                    this.on('change:attributes:tag_atk', this.handleChange);
                    this.handleChange();
                },
                handleChange() {
                    const label = this.getAttributes().label || 0;
                    const tag_sub = this.getAttributes().tag_sub || 0;
                    const tag_atk = this.getAttributes().tag_atk || 0;
                    this.components(`${label}`);
                }
            }
        });

        editor.DomComponents.addType('image', {
            isComponent: el => el.tagName === 'image',
            model: {
                defaults: {
                    traits: [{ type: 'input', name: 'label', label: 'Tên' },
                        { type: 'input', name: 'tag_sub', label: 'ID Tag Theo Dõi ' },
                        { type: 'input', name: 'tag_atk', label: 'ID Tag Tác Động ' }
                    ]
                },
                init() {
                    this.on('change:attributes:label', this.handleChange);
                    this.on('change:attributes:tag_sub', this.handleChange);
                    this.on('change:attributes:tag_atk', this.handleChange);
                    this.handleChange();
                },
                handleChange() {
                    const label = this.getAttributes().label || 0;
                    const tag_sub = this.getAttributes().tag_sub || 0;
                    const tag_atk = this.getAttributes().tag_atk || 0;
                    this.components(``);
                }
            }
        });
    };

    var editor = grapesjs.init({
        height: '100%',
        showOffsets: 1,
        noticeOnUnload: 0,
        storageManager: { autoload: 1 },
        container: '#gjs',
        fromElement: true,

        plugins: ['gjs-preset-webpage', hrefNextTrait],
        pluginsOpts: {
            'gjs-preset-webpage': {}
        },
        canvas: {
            styles: [
                'assets/css/app.min.css',
                'assets/css/style.css',
                'assets/css/components.css',
                'assets/css/custom.css',
            ],
            scripts: [
                'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js',
                'https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js',
                'assets/js/app.min.js',
                'assets/js/scripts.js',
            ],
        }
    });

    var blockManager = editor.BlockManager;
    blockManager.add('button-thuc', {
        label: '<img src ="https://cdn.pixabay.com/photo/2012/04/16/12/05/rectangular-35695_640.png" style ="width:55px;height:35px"><br/> <br/><span>Nút Nhấn</span>',
        content: '<button type="thuc" class ="btn btn-success" tag_atk ="0" tag_sub ="0" label = "Nút Nhấn"></button>',
        resizable: true,
        category: 'Thiết Bị',
        
    });
    blockManager.add('img-button-thuc', {
                label: '<img src ="https://www.pikpng.com/pngl/b/54-545326_button-icon-png-green-button-icon-png-clipart.png" style ="width:50px;height:50px"><br/> <br/><span>Nút Nhấn 2</span>',
                category: 'Thiết Bị',
                content: {
                    type: 'image',
                    } // Built-in 'map' component
                });
    </script>
</body>
<!-- General JS Scripts -->
<script src="assets/js/app.min.js"></script>
<!-- JS Libraies -->
<!-- Page Specific JS File -->
<!-- Template JS File -->
<script src="assets/js/scripts.js"></script>
<!-- Custom JS File -->
<script src="assets/js/custom.js"></script>

</html>